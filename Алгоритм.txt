1) Рекурсивный набор всех соседей в диапазоне яркостей от первого проверяемого пикселя.
Попавшие в диапазон идут в контейнер поры, если ещё там не находятся, не подходящие - в контейнер подозрительных, если их еще там нет.
Контейнер поры относятся к данной поре, контейнер подозрительных пикселей - отдельный контейнер, существующий на время расчёта поры.
Суммирование яркостей каждых подходящих пикселей.
2) Перерасчёт диапазона: отсчёт будет от отношения суммы яркостей к числу подходящих пикселей.
3) Проход по контейнеру подозрительных. Если пиксель попадает в перерасчитанный диапазон, то: если он ещё не находится в контейнере поры -
рекурсивно вернуться к шагу 1 с отсчётом от данного пикселя; удалить пиксель из контейнера подозрительных.
Если хотя бы один пиксель подошёл после перерасчёта - вернуться к шагу 2.
4) Проход по контейнеру оставшихся подозрительных. Если пиксель не принадлежит ранее найденным порам (маловероятно),
то рекурсивно вернуться к шагу 1 с созданием новой поры; удалить пиксель из контейнера.